Analyze the buffer sytem.

See what polls the buffer, and then reverse the dependency such that
the poller holds an internal queue.
